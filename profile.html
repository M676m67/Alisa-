<!-- profile.html -->
<!DOCTYPE html>
<html lang="en">
<head>
<title>My Profile</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="home.css">
</head>
<body>

<div id="navigation-placeholder"></div>

<div class="profile-container">
  <div class="cover"></div>
  <div class="profile-box">
    <img id="profileImage" src="https://files.catbox.moe/vkn7u7.jpg" alt="Profile Picture" class="profile-pic">
    <h1>My Profile</h1>
    <p><strong>Email:</strong> <span id="userEmail"></span></p>

    <div class="edit-form">
      <input type="password" id="oldPassword" placeholder="Current Password">
      <input type="password" id="newPassword" placeholder="New Password">
      <button class="save-btn" onclick="updatePassword()">Save</button>
    </div>
  </div>
</div>

<script>
  // تحميل navigation
  fetch('navigation.html')
    .then(response => response.text())
    .then(data => {
      document.getElementById('navigation-placeholder').innerHTML = data;
      const lists = document.querySelectorAll('.list');
      const path = window.location.pathname.split("/").pop();
      lists.forEach(li => {
        if (li.dataset.page === path) {
          li.classList.add('active');
        }
      });
    });

  // هنا تجيب بيانات من LocalStorage زي ما عملنا قبل كده
  document.getElementById("userEmail").textContent = localStorage.getItem("userEmail") || "No Email";

  function updatePassword() {
    const oldPass = document.getElementById("oldPassword").value;
    const newPass = document.getElementById("newPassword").value;
    const storedPass = localStorage.getItem("userPassword");

    if (oldPass !== storedPass) {
      alert("Current password incorrect!");
      return;
    }
    localStorage.setItem("userPassword", newPass);
    alert("Password updated!");
  }
</script>

<script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
<script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>

</body>
</html>
